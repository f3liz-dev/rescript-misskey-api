// SPDX-License-Identifier: MIT
// misskey-io API for non-productive
// Generated by rescript-codegen-openapi
// DO NOT EDIT - This file is auto-generated



type postResetDbResponse = unit

/**
 * reset-db
 *
 * Only available when running with <code>NODE_ENV=testing</code>. Reset the database and flush Redis.
 *
 * **Credential required**: *No*
 */
let postResetDb = (~fetch: (~url: string, ~method_: string, ~body: option<JSON.t>) => Promise.t<JSON.t>): promise<postResetDbResponse> => {
  
  fetch(
    ~url="/reset-db",
    ~method_="POST",
     ~body=None
  )->Promise.then(response => {
  let _ = response
  ()
->Promise.resolve
  })
}

type postTestRequest = {
  required: bool,
  string: option<string>,
  default: option<string>,
  nullableDefault: option<JSON.t>,
  id: option<string>,
}

let postTestRequestSchema = S.object(s => {
    required: s.field("required", S.bool),
    string: s.fieldOr("string", S.nullableAsOption(S.string), None),
    default: s.fieldOr("default", S.nullableAsOption(S.string), None),
    nullableDefault: s.fieldOr("nullableDefault", S.nullableAsOption(S.json), None),
    id: s.fieldOr("id", S.nullableAsOption(S.string), None),
  })

type postTestResponse = {
  id: option<string>,
  required: bool,
  string: option<string>,
  default: option<string>,
  nullableDefault: option<JSON.t>,
}

let postTestResponseSchema = S.object(s => {
    id: s.fieldOr("id", S.nullableAsOption(S.string), None),
    required: s.field("required", S.bool),
    string: s.fieldOr("string", S.nullableAsOption(S.string), None),
    default: s.fieldOr("default", S.nullableAsOption(S.string), None),
    nullableDefault: s.fieldOr("nullableDefault", S.nullableAsOption(S.json), None),
  })

/**
 * test
 *
 * Endpoint for testing input validation.
 *
 * **Credential required**: *No*
 */
let postTest = (~body: postTestRequest, ~fetch: (~url: string, ~method_: string, ~body: option<JSON.t>) => Promise.t<JSON.t>): promise<postTestResponse> => {
  let jsonBody = body->S.reverseConvertToJsonOrThrow(postTestRequestSchema)
  
  fetch(
    ~url="/test",
    ~method_="POST",
    ~body=Some(jsonBody),
  )->Promise.then(response => {
  let validatedResponse = response->S.parseOrThrow(postTestResponseSchema)
  validatedResponse
->Promise.resolve
  })
}
