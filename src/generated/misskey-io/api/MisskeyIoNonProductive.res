// misskey-io API for non-productive
// Generated by @f3liz/rescript-autogen-openapi
// DO NOT EDIT - This file is auto-generated

S.enableJson()


type postResetDbResponse = unit

/**
reset-db

Only available when running with <code>NODE_ENV=testing</code>. Reset the database and flush Redis.

**Credential required**: *No*
*/
let postResetDb = async (~fetch: (~url: string, ~method_: string, ~body: option<JSON.t>) => Promise.t<JSON.t>): postResetDbResponse => {

  let response = await fetch(
    ~url="/reset-db",
    ~method_="POST",
    ~body=None,
  )
  let _ = response
}

type postTestRequest = {
  required: bool,
  string: option<string>,
  default: option<string>,
  nullableDefault: option<string>,
  id: option<string>,
}

let postTestRequestSchema = S.object(s => {
    required: s.field("required", S.bool),
    string: s.field("string", S.option(S.string)),
    default: s.field("default", S.option(S.string)),
    nullableDefault: s.field("nullableDefault", S.option(S.string)),
    id: s.field("id", S.option(S.string)),
  })

type postTestResponse = {
  id: option<string>,
  required: bool,
  string: option<string>,
  default: option<string>,
  nullableDefault: option<string>,
}

let postTestResponseSchema = S.object(s => {
    id: s.field("id", S.option(S.string)),
    required: s.field("required", S.bool),
    string: s.field("string", S.option(S.string)),
    default: s.field("default", S.option(S.string)),
    nullableDefault: s.field("nullableDefault", S.option(S.string)),
  })

/**
test

Endpoint for testing input validation.

**Credential required**: *No*
*/
let postTest = async (~body: postTestRequest, ~fetch: (~url: string, ~method_: string, ~body: option<JSON.t>) => Promise.t<JSON.t>): postTestResponse => {
  let jsonBody = body->S.reverseConvertToJsonOrThrow(postTestRequestSchema)
  let response = await fetch(
    ~url="/test",
    ~method_="POST",
    ~body=Some(jsonBody),
  )
  response->S.parseOrThrow(postTestResponseSchema)
}
