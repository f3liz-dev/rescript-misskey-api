// misskey-io API for auth
// Generated by @f3liz/rescript-autogen-openapi
// DO NOT EDIT - This file is auto-generated

S.enableJson()


type postAuthAcceptRequest = {
  token: string,
}

let postAuthAcceptRequestSchema = S.object(s => {
    token: s.field("token", S.string),
  })

type postAuthAcceptResponse = unit

/**
auth/accept

No description provided.

**Internal Endpoint**: This endpoint is an API for the misskey mainframe and is not intended for use by third parties.
**Credential required**: *Yes*
*/
let postAuthAccept = async (~body: postAuthAcceptRequest, ~fetch: (~url: string, ~method_: string, ~body: option<JSON.t>) => Promise.t<JSON.t>): postAuthAcceptResponse => {
  let jsonBody = body->S.reverseConvertToJsonOrThrow(postAuthAcceptRequestSchema)
  let response = await fetch(
    ~url="/auth/accept",
    ~method_="POST",
    ~body=Some(jsonBody),
  )
  let _ = response
}

type postAuthSessionGenerateRequest = {
  appSecret: string,
}

let postAuthSessionGenerateRequestSchema = S.object(s => {
    appSecret: s.field("appSecret", S.string),
  })

type postAuthSessionGenerateResponse = {
  token: string,
  url: string,
}

let postAuthSessionGenerateResponseSchema = S.object(s => {
    token: s.field("token", S.string),
    url: s.field("url", S.string),
  })

/**
auth/session/generate

No description provided.

**Credential required**: *No*
*/
let postAuthSessionGenerate = async (~body: postAuthSessionGenerateRequest, ~fetch: (~url: string, ~method_: string, ~body: option<JSON.t>) => Promise.t<JSON.t>): postAuthSessionGenerateResponse => {
  let jsonBody = body->S.reverseConvertToJsonOrThrow(postAuthSessionGenerateRequestSchema)
  let response = await fetch(
    ~url="/auth/session/generate",
    ~method_="POST",
    ~body=Some(jsonBody),
  )
  response->S.parseOrThrow(postAuthSessionGenerateResponseSchema)
}

type postAuthSessionShowRequest = {
  token: string,
}

let postAuthSessionShowRequestSchema = S.object(s => {
    token: s.field("token", S.string),
  })

type postAuthSessionShowResponse = {
  id: string,
  app: MisskeyIoComponentSchemas.App.t,
  token: string,
}

let postAuthSessionShowResponseSchema = S.object(s => {
    id: s.field("id", S.string),
    app: s.field("app", MisskeyIoComponentSchemas.App.schema),
    token: s.field("token", S.string),
  })

/**
auth/session/show

No description provided.

**Credential required**: *No*
*/
let postAuthSessionShow = async (~body: postAuthSessionShowRequest, ~fetch: (~url: string, ~method_: string, ~body: option<JSON.t>) => Promise.t<JSON.t>): postAuthSessionShowResponse => {
  let jsonBody = body->S.reverseConvertToJsonOrThrow(postAuthSessionShowRequestSchema)
  let response = await fetch(
    ~url="/auth/session/show",
    ~method_="POST",
    ~body=Some(jsonBody),
  )
  response->S.parseOrThrow(postAuthSessionShowResponseSchema)
}

type postAuthSessionUserkeyRequest = {
  appSecret: string,
  token: string,
}

let postAuthSessionUserkeyRequestSchema = S.object(s => {
    appSecret: s.field("appSecret", S.string),
    token: s.field("token", S.string),
  })

type postAuthSessionUserkeyResponse = {
  accessToken: string,
  user: MisskeyIoComponentSchemas.UserDetailed.t,
}

let postAuthSessionUserkeyResponseSchema = S.object(s => {
    accessToken: s.field("accessToken", S.string),
    user: s.field("user", MisskeyIoComponentSchemas.UserDetailed.schema),
  })

/**
auth/session/userkey

No description provided.

**Credential required**: *No*
*/
let postAuthSessionUserkey = async (~body: postAuthSessionUserkeyRequest, ~fetch: (~url: string, ~method_: string, ~body: option<JSON.t>) => Promise.t<JSON.t>): postAuthSessionUserkeyResponse => {
  let jsonBody = body->S.reverseConvertToJsonOrThrow(postAuthSessionUserkeyRequestSchema)
  let response = await fetch(
    ~url="/auth/session/userkey",
    ~method_="POST",
    ~body=Some(jsonBody),
  )
  response->S.parseOrThrow(postAuthSessionUserkeyResponseSchema)
}

type postMiauthGenTokenRequest = {
  session: option<string>,
  name: option<string>,
  description: option<string>,
  iconUrl: option<string>,
  permission: array<string>,
}

let postMiauthGenTokenRequestSchema = S.object(s => {
    session: s.field("session", S.nullableAsOption(S.string)),
    name: s.field("name", S.option(S.string)),
    description: s.field("description", S.option(S.string)),
    iconUrl: s.field("iconUrl", S.option(S.string)),
    permission: s.field("permission", S.array(S.string)),
  })

type postMiauthGenTokenResponse = {
  token: string,
}

let postMiauthGenTokenResponseSchema = S.object(s => {
    token: s.field("token", S.string),
  })

/**
miauth/gen-token

No description provided.

**Internal Endpoint**: This endpoint is an API for the misskey mainframe and is not intended for use by third parties.
**Credential required**: *Yes*
*/
let postMiauthGenToken = async (~body: postMiauthGenTokenRequest, ~fetch: (~url: string, ~method_: string, ~body: option<JSON.t>) => Promise.t<JSON.t>): postMiauthGenTokenResponse => {
  let jsonBody = body->S.reverseConvertToJsonOrThrow(postMiauthGenTokenRequestSchema)
  let response = await fetch(
    ~url="/miauth/gen-token",
    ~method_="POST",
    ~body=Some(jsonBody),
  )
  response->S.parseOrThrow(postMiauthGenTokenResponseSchema)
}
