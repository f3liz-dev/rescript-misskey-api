// kokonect-link API for flash
// Generated by @f3liz/rescript-autogen-openapi
// DO NOT EDIT - This file is auto-generated



type postFlashCreateRequest = {
  title: string,
  summary: string,
  script: string,
  permissions: array<string>,
  visibility: option<string>,
}

let postFlashCreateRequestSchema = S.object(s => {
    title: s.field("title", S.string),
    summary: s.field("summary", S.string),
    script: s.field("script", S.string),
    permissions: s.field("permissions", S.array(S.string)),
    visibility: s.fieldOr("visibility", S.nullableAsOption(S.string), None),
  })

type postFlashCreateResponse = KokonectLinkComponentSchemas.Flash.t

let postFlashCreateResponseSchema = KokonectLinkComponentSchemas.Flash.schema

/**
 * flash/create
 *
 * No description provided.
 *
 * **Credential required**: *Yes* / **Permission**: *write:flash*
 */
let postFlashCreate = (~body: postFlashCreateRequest, ~fetch: (~url: string, ~method_: string, ~body: option<JSON.t>) => Promise.t<JSON.t>): promise<postFlashCreateResponse> => {
  let jsonBody = body->S.reverseConvertToJsonOrThrow(postFlashCreateRequestSchema)
  fetch(
    ~url="/flash/create",
    ~method_="POST",
    ~body=Some(jsonBody),
  )->Promise.then(response => {
  let value = response->S.parseOrThrow(postFlashCreateResponseSchema)
  value
    ->Promise.resolve
  })
}

type postFlashGenTokenRequest = {
  permissions: array<string>,
}

let postFlashGenTokenRequestSchema = S.object(s => {
    permissions: s.field("permissions", S.array(S.string)),
  })

type postFlashGenTokenResponse = {
  token: string,
}

let postFlashGenTokenResponseSchema = S.object(s => {
    token: s.field("token", S.string),
  })

/**
 * flash/gen-token
 *
 * No description provided.
 *
 * **Internal Endpoint**: This endpoint is an API for the cherrypick mainframe and is not intended for use by third parties.
 * **Credential required**: *Yes*
 */
let postFlashGenToken = (~body: postFlashGenTokenRequest, ~fetch: (~url: string, ~method_: string, ~body: option<JSON.t>) => Promise.t<JSON.t>): promise<postFlashGenTokenResponse> => {
  let jsonBody = body->S.reverseConvertToJsonOrThrow(postFlashGenTokenRequestSchema)
  fetch(
    ~url="/flash/gen-token",
    ~method_="POST",
    ~body=Some(jsonBody),
  )->Promise.then(response => {
  let value = response->S.parseOrThrow(postFlashGenTokenResponseSchema)
  value
    ->Promise.resolve
  })
}

type postFlashSearchRequest = {
  query: string,
  sinceId: option<string>,
  untilId: option<string>,
  sinceDate: option<int>,
  untilDate: option<int>,
  limit: option<int>,
}

let postFlashSearchRequestSchema = S.object(s => {
    query: s.field("query", S.string->S.min(1)->S.max(100)),
    sinceId: s.fieldOr("sinceId", S.nullableAsOption(S.string), None),
    untilId: s.fieldOr("untilId", S.nullableAsOption(S.string), None),
    sinceDate: s.fieldOr("sinceDate", S.nullableAsOption(S.int), None),
    untilDate: s.fieldOr("untilDate", S.nullableAsOption(S.int), None),
    limit: s.fieldOr("limit", S.nullableAsOption(S.int->S.min(1)->S.max(100)), None),
  })

type postFlashSearchResponse = array<KokonectLinkComponentSchemas.Flash.t>

let postFlashSearchResponseSchema = S.array(KokonectLinkComponentSchemas.Flash.schema)

/**
 * flash/search
 *
 * No description provided.
 *
 * **Credential required**: *No*
 */
let postFlashSearch = (~body: postFlashSearchRequest, ~fetch: (~url: string, ~method_: string, ~body: option<JSON.t>) => Promise.t<JSON.t>): promise<postFlashSearchResponse> => {
  let jsonBody = body->S.reverseConvertToJsonOrThrow(postFlashSearchRequestSchema)
  fetch(
    ~url="/flash/search",
    ~method_="POST",
    ~body=Some(jsonBody),
  )->Promise.then(response => {
  let value = response->S.parseOrThrow(postFlashSearchResponseSchema)
  value
    ->Promise.resolve
  })
}
