// SPDX-License-Identifier: MIT
// kokonect-link API for channels
// Generated by rescript-codegen-openapi
// DO NOT EDIT - This file is auto-generated



type postChannelsCreateRequest = {
  name: string,
  description: option<JSON.t>,
  bannerId: option<JSON.t>,
  color: option<string>,
  isSensitive: option<JSON.t>,
  allowRenoteToExternal: option<JSON.t>,
}

let postChannelsCreateRequestSchema = S.object(s => {
    name: s.field("name", S.string->S.min(1)->S.max(128)),
    description: s.fieldOr("description", S.nullableAsOption(S.json), None),
    bannerId: s.fieldOr("bannerId", S.nullableAsOption(S.json), None),
    color: s.fieldOr("color", S.nullableAsOption(S.string->S.min(1)->S.max(16)), None),
    isSensitive: s.fieldOr("isSensitive", S.nullableAsOption(S.json), None),
    allowRenoteToExternal: s.fieldOr("allowRenoteToExternal", S.nullableAsOption(S.json), None),
  })

type postChannelsCreateResponse = KokonectLinkComponentSchemas.Channel.t

let postChannelsCreateResponseSchema = KokonectLinkComponentSchemas.Channel.schema

/**
 * channels/create
 *
 * No description provided.
 *
 * **Credential required**: *Yes* / **Permission**: *write:channels*
 */
let postChannelsCreate = (~body: postChannelsCreateRequest, ~fetch: (~url: string, ~method_: string, ~body: option<JSON.t>) => Promise.t<JSON.t>): promise<postChannelsCreateResponse> => {
  let jsonBody = body->S.reverseConvertToJsonOrThrow(postChannelsCreateRequestSchema)
  
  fetch(
    ~url="/channels/create",
    ~method_="POST",
    ~body=Some(jsonBody),
  )->Promise.then(response => {
  let validatedResponse = response->S.parseOrThrow(postChannelsCreateResponseSchema)
  validatedResponse
->Promise.resolve
  })
}

type postChannelsFollowedRequest = {
  sinceId: option<string>,
  untilId: option<string>,
  sinceDate: option<int>,
  untilDate: option<int>,
  limit: option<int>,
}

let postChannelsFollowedRequestSchema = S.object(s => {
    sinceId: s.fieldOr("sinceId", S.nullableAsOption(S.string), None),
    untilId: s.fieldOr("untilId", S.nullableAsOption(S.string), None),
    sinceDate: s.fieldOr("sinceDate", S.nullableAsOption(S.int), None),
    untilDate: s.fieldOr("untilDate", S.nullableAsOption(S.int), None),
    limit: s.fieldOr("limit", S.nullableAsOption(S.int->S.min(1)->S.max(100)), None),
  })

type postChannelsFollowedResponse = array<KokonectLinkComponentSchemas.Channel.t>

let postChannelsFollowedResponseSchema = S.array(KokonectLinkComponentSchemas.Channel.schema)

/**
 * channels/followed
 *
 * No description provided.
 *
 * **Credential required**: *Yes* / **Permission**: *read:channels*
 */
let postChannelsFollowed = (~body: postChannelsFollowedRequest, ~fetch: (~url: string, ~method_: string, ~body: option<JSON.t>) => Promise.t<JSON.t>): promise<postChannelsFollowedResponse> => {
  let jsonBody = body->S.reverseConvertToJsonOrThrow(postChannelsFollowedRequestSchema)
  
  fetch(
    ~url="/channels/followed",
    ~method_="POST",
    ~body=Some(jsonBody),
  )->Promise.then(response => {
  let validatedResponse = response->S.parseOrThrow(postChannelsFollowedResponseSchema)
  validatedResponse
->Promise.resolve
  })
}

type postChannelsOwnedRequest = {
  sinceId: option<string>,
  untilId: option<string>,
  sinceDate: option<int>,
  untilDate: option<int>,
  limit: option<int>,
}

let postChannelsOwnedRequestSchema = S.object(s => {
    sinceId: s.fieldOr("sinceId", S.nullableAsOption(S.string), None),
    untilId: s.fieldOr("untilId", S.nullableAsOption(S.string), None),
    sinceDate: s.fieldOr("sinceDate", S.nullableAsOption(S.int), None),
    untilDate: s.fieldOr("untilDate", S.nullableAsOption(S.int), None),
    limit: s.fieldOr("limit", S.nullableAsOption(S.int->S.min(1)->S.max(100)), None),
  })

type postChannelsOwnedResponse = array<KokonectLinkComponentSchemas.Channel.t>

let postChannelsOwnedResponseSchema = S.array(KokonectLinkComponentSchemas.Channel.schema)

/**
 * channels/owned
 *
 * No description provided.
 *
 * **Credential required**: *Yes* / **Permission**: *read:channels*
 */
let postChannelsOwned = (~body: postChannelsOwnedRequest, ~fetch: (~url: string, ~method_: string, ~body: option<JSON.t>) => Promise.t<JSON.t>): promise<postChannelsOwnedResponse> => {
  let jsonBody = body->S.reverseConvertToJsonOrThrow(postChannelsOwnedRequestSchema)
  
  fetch(
    ~url="/channels/owned",
    ~method_="POST",
    ~body=Some(jsonBody),
  )->Promise.then(response => {
  let validatedResponse = response->S.parseOrThrow(postChannelsOwnedResponseSchema)
  validatedResponse
->Promise.resolve
  })
}

type postChannelsSearchRequest = {
  query: string,
  @as("type") type_: option<string>,
  sinceId: option<string>,
  untilId: option<string>,
  sinceDate: option<int>,
  untilDate: option<int>,
  limit: option<int>,
}

let postChannelsSearchRequestSchema = S.object(s => {
    query: s.field("query", S.string),
    type_: s.fieldOr("type", S.nullableAsOption(S.string), None),
    sinceId: s.fieldOr("sinceId", S.nullableAsOption(S.string), None),
    untilId: s.fieldOr("untilId", S.nullableAsOption(S.string), None),
    sinceDate: s.fieldOr("sinceDate", S.nullableAsOption(S.int), None),
    untilDate: s.fieldOr("untilDate", S.nullableAsOption(S.int), None),
    limit: s.fieldOr("limit", S.nullableAsOption(S.int->S.min(1)->S.max(100)), None),
  })

type postChannelsSearchResponse = array<KokonectLinkComponentSchemas.Channel.t>

let postChannelsSearchResponseSchema = S.array(KokonectLinkComponentSchemas.Channel.schema)

/**
 * channels/search
 *
 * No description provided.
 *
 * **Credential required**: *No*
 */
let postChannelsSearch = (~body: postChannelsSearchRequest, ~fetch: (~url: string, ~method_: string, ~body: option<JSON.t>) => Promise.t<JSON.t>): promise<postChannelsSearchResponse> => {
  let jsonBody = body->S.reverseConvertToJsonOrThrow(postChannelsSearchRequestSchema)
  
  fetch(
    ~url="/channels/search",
    ~method_="POST",
    ~body=Some(jsonBody),
  )->Promise.then(response => {
  let validatedResponse = response->S.parseOrThrow(postChannelsSearchResponseSchema)
  validatedResponse
->Promise.resolve
  })
}

type postChannelsShowRequest = {
  channelId: string,
}

let postChannelsShowRequestSchema = S.object(s => {
    channelId: s.field("channelId", S.string),
  })

type postChannelsShowResponse = KokonectLinkComponentSchemas.Channel.t

let postChannelsShowResponseSchema = KokonectLinkComponentSchemas.Channel.schema

/**
 * channels/show
 *
 * No description provided.
 *
 * **Credential required**: *No*
 */
let postChannelsShow = (~body: postChannelsShowRequest, ~fetch: (~url: string, ~method_: string, ~body: option<JSON.t>) => Promise.t<JSON.t>): promise<postChannelsShowResponse> => {
  let jsonBody = body->S.reverseConvertToJsonOrThrow(postChannelsShowRequestSchema)
  
  fetch(
    ~url="/channels/show",
    ~method_="POST",
    ~body=Some(jsonBody),
  )->Promise.then(response => {
  let validatedResponse = response->S.parseOrThrow(postChannelsShowResponseSchema)
  validatedResponse
->Promise.resolve
  })
}

type postChannelsUpdateRequest = {
  channelId: string,
  name: option<string>,
  description: option<JSON.t>,
  bannerId: option<JSON.t>,
  isArchived: option<JSON.t>,
  pinnedNoteIds: option<array<string>>,
  color: option<string>,
  isSensitive: option<JSON.t>,
  allowRenoteToExternal: option<JSON.t>,
}

let postChannelsUpdateRequestSchema = S.object(s => {
    channelId: s.field("channelId", S.string),
    name: s.fieldOr("name", S.nullableAsOption(S.string->S.min(1)->S.max(128)), None),
    description: s.fieldOr("description", S.nullableAsOption(S.json), None),
    bannerId: s.fieldOr("bannerId", S.nullableAsOption(S.json), None),
    isArchived: s.fieldOr("isArchived", S.nullableAsOption(S.json), None),
    pinnedNoteIds: s.fieldOr("pinnedNoteIds", S.nullableAsOption(S.array(S.string)), None),
    color: s.fieldOr("color", S.nullableAsOption(S.string->S.min(1)->S.max(16)), None),
    isSensitive: s.fieldOr("isSensitive", S.nullableAsOption(S.json), None),
    allowRenoteToExternal: s.fieldOr("allowRenoteToExternal", S.nullableAsOption(S.json), None),
  })

type postChannelsUpdateResponse = KokonectLinkComponentSchemas.Channel.t

let postChannelsUpdateResponseSchema = KokonectLinkComponentSchemas.Channel.schema

/**
 * channels/update
 *
 * No description provided.
 *
 * **Credential required**: *Yes* / **Permission**: *write:channels*
 */
let postChannelsUpdate = (~body: postChannelsUpdateRequest, ~fetch: (~url: string, ~method_: string, ~body: option<JSON.t>) => Promise.t<JSON.t>): promise<postChannelsUpdateResponse> => {
  let jsonBody = body->S.reverseConvertToJsonOrThrow(postChannelsUpdateRequestSchema)
  
  fetch(
    ~url="/channels/update",
    ~method_="POST",
    ~body=Some(jsonBody),
  )->Promise.then(response => {
  let validatedResponse = response->S.parseOrThrow(postChannelsUpdateResponseSchema)
  validatedResponse
->Promise.resolve
  })
}
