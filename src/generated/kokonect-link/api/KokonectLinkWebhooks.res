// kokonect-link API for webhooks
// Generated by @f3liz/rescript-autogen-openapi
// DO NOT EDIT - This file is auto-generated



type postAdminSystemWebhookTestRequest = {
  webhookId: string,
  @as("type") type_: string,
  override: option<{
  url: option<string>,
  secret: option<string>,
}>,
}

let postAdminSystemWebhookTestRequestSchema = S.object(s => {
    webhookId: s.field("webhookId", S.string),
    type_: s.field("type", S.string),
    override: s.fieldOr("override", S.nullableAsOption(S.object(s => {
    url: s.fieldOr("url", S.nullableAsOption(S.string), None),
    secret: s.fieldOr("secret", S.nullableAsOption(S.string), None),
  })), None),
  })

type postAdminSystemWebhookTestResponse = unit

/**
 * admin/system-webhook/test
 *
 * No description provided.
 *
 * **Internal Endpoint**: This endpoint is an API for the cherrypick mainframe and is not intended for use by third parties.
 * **Credential required**: *Yes* / **Permission**: *read:admin:system-webhook*
 */
let postAdminSystemWebhookTest = (~body: postAdminSystemWebhookTestRequest, ~fetch: (~url: string, ~method_: string, ~body: option<JSON.t>) => Promise.t<JSON.t>): promise<postAdminSystemWebhookTestResponse> => {
  let jsonBody = body->S.reverseConvertToJsonOrThrow(postAdminSystemWebhookTestRequestSchema)
  fetch(
    ~url="/admin/system-webhook/test",
    ~method_="POST",
    ~body=Some(jsonBody),
  )->Promise.then(response => {
  let _ = response
  ()
    ->Promise.resolve
  })
}

type postIWebhooksShowRequest = {
  webhookId: string,
}

let postIWebhooksShowRequestSchema = S.object(s => {
    webhookId: s.field("webhookId", S.string),
  })

type postIWebhooksShowResponse = KokonectLinkComponentSchemas.UserWebhook.t

let postIWebhooksShowResponseSchema = KokonectLinkComponentSchemas.UserWebhook.schema

/**
 * i/webhooks/show
 *
 * No description provided.
 *
 * **Credential required**: *Yes* / **Permission**: *read:account*
 */
let postIWebhooksShow = (~body: postIWebhooksShowRequest, ~fetch: (~url: string, ~method_: string, ~body: option<JSON.t>) => Promise.t<JSON.t>): promise<postIWebhooksShowResponse> => {
  let jsonBody = body->S.reverseConvertToJsonOrThrow(postIWebhooksShowRequestSchema)
  fetch(
    ~url="/i/webhooks/show",
    ~method_="POST",
    ~body=Some(jsonBody),
  )->Promise.then(response => {
  let value = response->S.parseOrThrow(postIWebhooksShowResponseSchema)
  value
    ->Promise.resolve
  })
}

type postIWebhooksTestRequest = {
  webhookId: string,
  @as("type") type_: string,
  override: option<{
  url: option<string>,
  secret: option<string>,
}>,
}

let postIWebhooksTestRequestSchema = S.object(s => {
    webhookId: s.field("webhookId", S.string),
    type_: s.field("type", S.string),
    override: s.fieldOr("override", S.nullableAsOption(S.object(s => {
    url: s.fieldOr("url", S.nullableAsOption(S.string), None),
    secret: s.fieldOr("secret", S.nullableAsOption(S.string), None),
  })), None),
  })

type postIWebhooksTestResponse = unit

/**
 * i/webhooks/test
 *
 * No description provided.
 *
 * **Internal Endpoint**: This endpoint is an API for the cherrypick mainframe and is not intended for use by third parties.
 * **Credential required**: *Yes* / **Permission**: *read:account*
 */
let postIWebhooksTest = (~body: postIWebhooksTestRequest, ~fetch: (~url: string, ~method_: string, ~body: option<JSON.t>) => Promise.t<JSON.t>): promise<postIWebhooksTestResponse> => {
  let jsonBody = body->S.reverseConvertToJsonOrThrow(postIWebhooksTestRequestSchema)
  fetch(
    ~url="/i/webhooks/test",
    ~method_="POST",
    ~body=Some(jsonBody),
  )->Promise.then(response => {
  let _ = response
  ()
    ->Promise.resolve
  })
}
